---
title: "togit"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## GitHub Documents

This is an R Markdown format used for publishing markdown documents to GitHub. When you click the **Knit** button all R code chunks are run and a markdown file (.md) suitable for publishing to GitHub is generated.

## Including Code

You can include R code in the document as follows:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


## Analysis of results 

This page shows how to carry out an analysis of results in R. The
scenario of analysis in Assignment 1 is single pass heuristics tested
with a single run on multiple instances, each run with a time limit of
60 seconds. Hence, the analysis must take into account a bivariate
performance measure. There are three classes of instances: Augerat, CMT and Golden.
Among the instances of type CMT only the instances CMT1, CMT2, CMT3, CMT12, CMT11, CMT4 and CMT5 have been included. The others include maximum distance and service time constraints that we
do not handle. Hence they were discarded.

The results are collected in a file <a href="./res.txt">res.txt</a>.
The results are collected in a file <a href="./res.txt">res.txt</a>.
Each row of the file contains the userID, the name of the instance, the number of routes, the total cost of the solution and the running time when the program terminated. The userID Saving is a classic algorithm for CVRP, the saving heuristic. 
Each row of the file contains the userID, the name of the instance, the number of routes, the total cost of the solution and the running time when the program terminated. The userID Saving is a classic algorithm for CVRP, the savings heuristic. 

## Data preprocessing

We load the results in R and ensure that the fields alg and instance are trated as factors. 

```{r setup2, echo=FALSE, cache=FALSE, message=FALSE, warning=FALSE}
rm(list = ls())
library("dplyr")
library("ggplot2")
#library("showtext")
# library("printr")

knitr::opts_chunk$set(comment=NA, error = TRUE, warning = FALSE, cache = FALSE) #, fig.showtext = TRUE) #,  dev = "CairoPNG") # , fig.width = 8)

# font.add.google("Lato", "myfont")
# showtext.auto()

theme_set(theme_minimal(base_size = 13, base_family = "myfont") +
            theme(#legend.position = "none",
                  text = element_text(colour = "#616161")))

# define a method for objects of the class data.frame
knit_print.data.frame = function(x, ...) {
    res = paste(c("", "", kable(x)), collapse = "\n")
    asis_output(res)
}

options(width = 100, digits=4)
```

```{r load, echo=TRUE, results='hide'}
#load the data and give names to fields
D2019 <- read.table("../res/res.txt",fill=TRUE)
colnames(D2019)<- c("alg","instance","routes","eval","time")
D2018 <- read.table("./res-2018.txt",fill=TRUE)
colnames(D2018)<- c("alg","instance","routes","eval","time") #,"time")
D2018 <- mutate(D2018,alg=factor(alg))
levels(D2018$alg)<-paste("x-2018",letters[1:nlevels(D2018$alg)],sep="-")
D2019<-rbind(D2019,D2018)

D2019$class<-NA
D2019$class[ grep("A-", D2019$instance)] <- "Augerat"
D2019$class[ grep("CMT", D2019$instance)] <- "CMT"
D2019$class[ grep("Golden", D2019$instance)] <- "Golden"

D2019 <- D2019 %>% mutate(alg=gsub("3702445","Savings",alg))
D2019 <- mutate(D2019,
          alg=factor(alg)
          )

D2019 <- D2019 %>% mutate(instance=gsub(".xml","",instance)) %>% mutate(instance=factor(instance))
#D<-rbind(D,data.frame(alg="GLS",instance=bo$V1,hard=bo$V2,soft=bo$V3,eval=0,time=120))
```}
